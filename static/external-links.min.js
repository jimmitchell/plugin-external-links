document.addEventListener('DOMContentLoaded', () => {
    const currentDomain = window.location.hostname;
    const links = document.querySelectorAll('a');
    for (const link of links) {
        if (!link.href) continue;
        let linkDomain;
        try {
            linkDomain = new URL(link.href).hostname;
        } catch {
            continue; // Invalid URL, skip
        }
        if (linkDomain && linkDomain !== currentDomain) {
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            link.classList.add('external-link');
        }
    }
});